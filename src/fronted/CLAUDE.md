[æ ¹ç›®å½•](../../CLAUDE.md) > [src](../) > **fronted**

# å‰ç«¯æ¨¡å—æ–‡æ¡£

## æ¨¡å—èŒè´£

å‰ç«¯æ¨¡å—è´Ÿè´£ DashPlayer çš„ç”¨æˆ·ç•Œé¢å±•ç¤ºå’Œäº¤äº’é€»è¾‘ï¼Œé‡‡ç”¨ React + TypeScript æŠ€æœ¯æ ˆï¼Œæä¾›ç°ä»£åŒ–çš„æ¡Œé¢åº”ç”¨ä½“éªŒã€‚

## æ¶æ„è®¾è®¡

```mermaid
graph TD
    A["å‰ç«¯æ¨¡å—"] --> B["Pages é¡µé¢å±‚"];
    A --> C["Components ç»„ä»¶å±‚"];
    A --> D["Hooks çŠ¶æ€å±‚"];
    A --> E["UI åŸºç¡€ç»„ä»¶"];
    A --> F["è·¯ç”±å¯¼èˆª"];

    B --> G["8ä¸ªä¸»è¦é¡µé¢"];
    B --> H["è®¾ç½®é¡µé¢å­æ¨¡å—"];

    C --> I["æ’­æ”¾å™¨ç»„ä»¶"];
    C --> J["å­—å¹•ç»„ä»¶"];
    C --> K["èŠå¤©ç»„ä»¶"];
    C --> L["æ–‡ä»¶æµè§ˆå™¨"];

    E --> M["Radix UI ç»„ä»¶"];
    E --> N["è‡ªå®šä¹‰ UI ç»„ä»¶"];

    F --> O["React Router"];
```

## å…¥å£ä¸å¯åŠ¨

### æ ¸å¿ƒå…¥å£æ–‡ä»¶
- **åº”ç”¨æ ¹ç»„ä»¶**: `app.tsx` - React åº”ç”¨å…¥å£å’Œè·¯ç”±é…ç½®
- **é¡µé¢å¸ƒå±€**: `pages/Layout.tsx` - ä¸»å¸ƒå±€å®¹å™¨
- **æ ‡é¢˜æ **: `pages/TieleBarLayout.tsx` - è‡ªå®šä¹‰æ ‡é¢˜æ 

### è·¯ç”±ç»“æ„
```typescript
/                    - é¦–é¡µ (HomePage)
/home              - é¦–é¡µ
/player/:videoId    - è§†é¢‘æ’­æ”¾é¡µé¢
/transcript         - å­—å¹•è½¬å†™é¡µé¢
/favorite          - æ”¶è—ç®¡ç†é¡µé¢
/split             - è§†é¢‘åˆ†å‰²é¡µé¢
/download          - è§†é¢‘ä¸‹è½½é¡µé¢
/convert           - æ ¼å¼è½¬æ¢é¡µé¢
/about             - å…³äºé¡µé¢
/settings/*        - è®¾ç½®é¡µé¢ç»„
  /shortcut        - å¿«æ·é”®è®¾ç½®
  /you-dao         - æœ‰é“ç¿»è¯‘è®¾ç½®
  /tenant          - ç§Ÿæˆ·è®¾ç½®
  /open-ai         - OpenAI è®¾ç½®
  /storage         - å­˜å‚¨è®¾ç½®
  /update          - æ›´æ–°è®¾ç½®
  /appearance      - å¤–è§‚è®¾ç½®
```

## å¯¹å¤–æ¥å£

### çŠ¶æ€ç®¡ç†
- **å…¨å±€çŠ¶æ€**: Zustand (`hooks/useSetting.ts`)
- **è®¾ç½®ç®¡ç†**: åº”ç”¨é…ç½®çš„å“åº”å¼ç®¡ç†
- **ç»„ä»¶çŠ¶æ€**: React Hooks + Context API

### API é€šä¿¡
- **Electron API**: é€šè¿‡ `window.electron` ä¸åç«¯é€šä¿¡
- **ç±»å‹å®‰å…¨**: ä½¿ç”¨ TypeScript ç±»å‹å®šä¹‰ç¡®ä¿ API è°ƒç”¨å®‰å…¨
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„é”™è¯¯æç¤ºå’ŒçŠ¶æ€åé¦ˆ

## é¡µé¢ç»„ä»¶è¯¦è§£

### ä¸»è¦åŠŸèƒ½é¡µé¢

#### 1. æ’­æ”¾å™¨é¡µé¢ (`PlayerWithControlsPage.tsx`)
- **åŠŸèƒ½**: æ ¸å¿ƒè§†é¢‘æ’­æ”¾åŠŸèƒ½
- **ç‰¹æ€§**: è‡ªå®šä¹‰æ§åˆ¶é¢æ¿ã€å­—å¹•æ˜¾ç¤ºã€å¿«æ·é”®æ”¯æŒ
- **ç»„ä»¶**: `Player.tsx`, `PlayerControlPanel.tsx`, `ControlBox.tsx`

#### 2. å­—å¹•è½¬å†™é¡µé¢ (`Transcript.tsx`)
- **åŠŸèƒ½**: å­—å¹•å†…å®¹æŸ¥çœ‹å’Œç¼–è¾‘
- **ç»„ä»¶**: `TranscriptTable.tsx`, `TranscriptFile.tsx`
- **ç‰¹æ€§**: è¡¨æ ¼å±•ç¤ºã€æœç´¢è¿‡æ»¤ã€æ‰¹é‡æ“ä½œ

#### 3. æ”¶è—ç®¡ç†é¡µé¢ (`Favorite.tsx`)
- **åŠŸèƒ½**: è§†é¢‘ç‰‡æ®µæ”¶è—å’Œæ ‡ç­¾ç®¡ç†
- **ç»„ä»¶**: `FavouriteItem.tsx`, `FavouritePlayer.tsx`, `TagSelector.tsx`
- **ç‰¹æ€§**: æ ‡ç­¾åˆ†ç±»ã€ç‰‡æ®µé¢„è§ˆã€æ‰¹é‡ç®¡ç†

#### 4. è§†é¢‘åˆ†å‰²é¡µé¢ (`Split.tsx`)
- **åŠŸèƒ½**: æŒ‰ç« èŠ‚åˆ†å‰²è§†é¢‘
- **ç»„ä»¶**: `SplitFile.tsx`, `split-preview.tsx`
- **ç‰¹æ€§**: ç« èŠ‚è§£æã€é¢„è§ˆã€æ‰¹é‡åˆ†å‰²

#### 5. è®¾ç½®é¡µé¢ç»„ (`setting/`)
- **å¿«æ·é”®è®¾ç½®**: `ShortcutSetting.tsx`
- **ç¿»è¯‘æœåŠ¡è®¾ç½®**: `YouDaoSetting.tsx`, `OpenAiSetting.tsx`
- **å­˜å‚¨ç®¡ç†**: `StorageSetting.tsx`
- **å¤–è§‚é…ç½®**: `AppearanceSetting.tsx`

## æ ¸å¿ƒç»„ä»¶åº“

### æ’­æ”¾å™¨ç»„ä»¶æ—
- **Player.tsx**: ä¸»æ’­æ”¾å™¨ç»„ä»¶ï¼ŒåŸºäº React Player
- **PlayerControlPanel.tsx**: æ’­æ”¾æ§åˆ¶é¢æ¿
- **ControlButton.tsx**: æ ‡å‡†æ§åˆ¶æŒ‰é’®
- **VolumeSlider.tsx**: éŸ³é‡æ§åˆ¶æ»‘å—
- **PlaySpeedToaster.tsx**: æ’­æ”¾é€Ÿåº¦è°ƒèŠ‚

### å­—å¹•ç»„ä»¶æ—
- **Subtitle.tsx**: å­—å¹•æ˜¾ç¤ºç»„ä»¶
- **MainSubtitle.tsx**: ä¸»å­—å¹•åŒºåŸŸ
- **PlayerSubtitle.tsx**: æ’­æ”¾å™¨å­—å¹•
- **PlayerSubtitleControlPannel.tsx**: å­—å¹•æ§åˆ¶é¢æ¿
- **srt-cops/**: å­—å¹•ç¼–è¾‘ç›¸å…³ç»„ä»¶

### èŠå¤©ç»„ä»¶æ— (`chat/`)
- **Chat.tsx**: AI å¯¹è¯ä¸»ç•Œé¢
- **ChatCenter.tsx**: å¯¹è¯ä¸­å¿ƒåŒºåŸŸ
- **ChatLeftWords.tsx**: å·¦ä¾§å•è¯åˆ†æ
- **ChatRightSentences.tsx**: å³ä¾§å¥å­åˆ†æ
- **message/**: æ¶ˆæ¯ç»„ä»¶ç±»å‹

### æ–‡ä»¶æµè§ˆå™¨ç»„ä»¶æ— (`fileBowser/`)
- **FileSelector.tsx**: æ–‡ä»¶é€‰æ‹©å™¨
- **FolderSelector.tsx**: æ–‡ä»¶å¤¹é€‰æ‹©å™¨
- **VideoItem2.tsx**: è§†é¢‘é¡¹ç›®å±•ç¤º
- **project-list-**: é¡¹ç›®åˆ—è¡¨ç›¸å…³ç»„ä»¶

### è®¾ç½®ç»„ä»¶æ— (`setting/`)
- **SettingInput.tsx**: è®¾ç½®è¾“å…¥æ¡†
- **SliderInput.tsx**: æ»‘å—è¾“å…¥
- **Combobox.tsx**: ä¸‹æ‹‰é€‰æ‹©æ¡†
- **Header.tsx**, `Title.tsx**: è®¾ç½®é¡µé¢å¸ƒå±€

### UI åŸºç¡€ç»„ä»¶ (`ui/`)
åŸºäº Radix UI æ„å»ºçš„è®¾è®¡ç³»ç»Ÿï¼š
- **button.tsx**: æŒ‰é’®ç»„ä»¶
- **dialog.tsx**: å¯¹è¯æ¡†ç»„ä»¶
- **dropdown-menu.tsx**: ä¸‹æ‹‰èœå•
- **toast.tsx**: é€šçŸ¥æç¤º
- **card.tsx**: å¡ç‰‡å®¹å™¨
- **slider.tsx**: æ»‘å—ç»„ä»¶
- **select.tsx**: é€‰æ‹©å™¨ç»„ä»¶

## çŠ¶æ€ç®¡ç†æ¶æ„

### Zustand Store è®¾è®¡
```typescript
// å…¨å±€è®¾ç½®çŠ¶æ€
interface SettingState {
  init: boolean;
  values: Map<SettingKey, string>;
  setSetting: (key: SettingKey, value: string) => void;
  setting: (key: SettingKey) => string;
}
```

### è‡ªå®šä¹‰ Hooks
- **useSetting**: å…¨å±€è®¾ç½®ç®¡ç†
- **useSystem**: ç³»ç»ŸçŠ¶æ€åŒæ­¥
- å„ç§ä¸šåŠ¡é€»è¾‘ hooks

### ä¸»é¢˜ç³»ç»Ÿ
- **æ”¯æŒ**: æ˜æš—ä¸»é¢˜åˆ‡æ¢
- **å®ç°**: Tailwind CSS + next-themes
- **å“åº”å¼**: è‡ªåŠ¨åº”ç”¨ä¸»é¢˜ç±»å

## æ ·å¼ç³»ç»Ÿ

### Tailwind CSS é…ç½®
- **åŸºç¡€é…ç½®**: `tailwind.config.js`
- **æ‰©å±•æ’ä»¶**: `@tailwindcss/typography`, `tailwind-scrollbar`
- **è‡ªå®šä¹‰ä¸»é¢˜**: é¢œè‰²ã€å­—ä½“ã€é—´è·ç­‰è®¾è®¡ä»¤ç‰Œ

### ç»„ä»¶æ ·å¼ç­–ç•¥
- **åŸå­åŒ–**: ä½¿ç”¨ Tailwind åŸå­ç±»
- **ç»„ä»¶å°è£…**: é€šè¿‡ `className` ç»„åˆ
- **å“åº”å¼**: ç§»åŠ¨ç«¯é€‚é…
- **ä¸»é¢˜é€‚é…**: è‡ªåŠ¨ä¸»é¢˜åˆ‡æ¢

### ç‰¹æ®Šæ ·å¼åŠŸèƒ½
- **æ»šåŠ¨æ¡ç¾åŒ–**: è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼
- **å…¨å±æ¨¡å¼**: æ’­æ”¾å™¨å…¨å±é€‚é…
- **æ— è¾¹æ¡†çª—å£**: Electron è‡ªå®šä¹‰æ ‡é¢˜æ æ ·å¼

## å¸¸è§é—®é¢˜ (FAQ)

### Q: å¦‚ä½•æ·»åŠ æ–°é¡µé¢ï¼Ÿ
A: 1. åœ¨ `pages/` ç›®å½•åˆ›å»ºé¡µé¢ç»„ä»¶
   2. åœ¨ `app.tsx` ä¸­æ·»åŠ è·¯ç”±é…ç½®
   3. å¦‚éœ€å¸ƒå±€ï¼Œä½¿ç”¨ `Layout.tsx` æˆ– `TitleBarLayout.tsx`

### Q: å¦‚ä½•å¤ç”¨ UI ç»„ä»¶ï¼Ÿ
A: ä¼˜å…ˆä½¿ç”¨ `ui/` ç›®å½•ä¸‹çš„ Radix UI ç»„ä»¶ï¼Œæˆ–æ‰©å±•ç°æœ‰ç»„ä»¶

### Q: å¦‚ä½•ç®¡ç†å¤æ‚çŠ¶æ€ï¼Ÿ
A: ä½¿ç”¨ Zustand åˆ›å»ºå…¨å±€çŠ¶æ€ï¼Œæˆ– React Context è¿›è¡Œç»„ä»¶çº§çŠ¶æ€ç®¡ç†

### Q: å¦‚ä½•æ·»åŠ ä¸»é¢˜å®šåˆ¶ï¼Ÿ
A: åœ¨ `tailwind.config.js` ä¸­æ‰©å±•ä¸»é¢˜é…ç½®ï¼Œæˆ–ä½¿ç”¨ CSS å˜é‡

## ç›¸å…³æ–‡ä»¶æ¸…å•

### ç›®å½•ç»“æ„
```
fronted/
â”œâ”€â”€ pages/               # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ setting/        # è®¾ç½®é¡µé¢å­æ¨¡å—
â”‚   â”œâ”€â”€ transcript/     # å­—å¹•è½¬å†™
â”‚   â”œâ”€â”€ favourite/      # æ”¶è—ç®¡ç†
â”‚   â”œâ”€â”€ split/          # è§†é¢‘åˆ†å‰²
â”‚   â”œâ”€â”€ convert/        # æ ¼å¼è½¬æ¢
â”‚   â””â”€â”€ fileBowser/     # æ–‡ä»¶æµè§ˆå™¨
â”œâ”€â”€ components/          # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ ui/            # åŸºç¡€ UI ç»„ä»¶
â”‚   â”œâ”€â”€ chat/          # AI èŠå¤©ç»„ä»¶
â”‚   â”œâ”€â”€ playerSubtitle/ # æ’­æ”¾å™¨å­—å¹•
â”‚   â”œâ”€â”€ srt-cops/      # å­—å¹•ç¼–è¾‘
â”‚   â”œâ”€â”€ query/         # æŸ¥è¯¢è¿‡æ»¤
â”‚   â””â”€â”€ setting/       # è®¾ç½®ä¸“ç”¨ç»„ä»¶
â”œâ”€â”€ hooks/              # è‡ªå®šä¹‰ Hooks
â””â”€â”€ styles/             # æ ·å¼æ–‡ä»¶ (å¦‚éœ€è¦)
```

### å…³é”®æ–‡ä»¶
- `app.tsx` - åº”ç”¨å…¥å£å’Œè·¯ç”±
- `hooks/useSetting.ts` - å…¨å±€çŠ¶æ€ç®¡ç†
- `pages/Layout.tsx` - ä¸»å¸ƒå±€
- `pages/HomePage.tsx` - é¦–é¡µ
- `components/Player.tsx` - æ’­æ”¾å™¨ç»„ä»¶

## æŠ€æœ¯ç‰¹ç‚¹

### ç°ä»£åŒ–å¼€å‘ä½“éªŒ
- **TypeScript**: å®Œæ•´ç±»å‹å®‰å…¨
- **React 18**: æœ€æ–° React ç‰¹æ€§
- **Vite**: å¿«é€Ÿå¼€å‘å’Œæ„å»º
- **ESLint**: ä»£ç è´¨é‡æ£€æŸ¥

### ç»„ä»¶åŒ–è®¾è®¡
- **é«˜å¤ç”¨æ€§**: ç»Ÿä¸€çš„ç»„ä»¶åº“
- **ä¸€è‡´æ€§**: è®¾è®¡ç³»ç»Ÿçº¦æŸ
- **å¯ç»´æŠ¤æ€§**: æ¸…æ™°çš„ç»„ä»¶åˆ†å±‚

### æ€§èƒ½ä¼˜åŒ–
- **æ‡’åŠ è½½**: è·¯ç”±çº§åˆ«çš„ä»£ç åˆ†å‰²
- **è™šæ‹ŸåŒ–**: é•¿åˆ—è¡¨è™šæ‹Ÿæ»šåŠ¨ (react-virtuoso)
- **ç¼“å­˜**: SWR æ•°æ®ç¼“å­˜
- **ä¼˜åŒ–æ¸²æŸ“**: React.memo å’Œ useMemo

## å˜æ›´è®°å½• (Changelog)

### 2025-11-20 - å‰ç«¯æ¨¡å—æ–‡æ¡£åˆ›å»º
- âœ¨ åˆ›å»ºå‰ç«¯æ¨¡å—è¯¦ç»†æ–‡æ¡£
- ğŸ“Š åˆ†æ 8ä¸ªä¸»è¦é¡µé¢å’Œ 50+ä¸ªç»„ä»¶
- ğŸ” è¯†åˆ« React + Zustand çŠ¶æ€ç®¡ç†æ¶æ„
- ğŸ“‹ ç”Ÿæˆç»„ä»¶ä¾èµ–å…³ç³»å›¾
- âš ï¸ å‘ç°ç»„ä»¶æµ‹è¯•ç¼ºå¤±ï¼Œå»ºè®®è¡¥å……ç»„ä»¶æµ‹è¯•

---
*æœ€åæ›´æ–°: 2025-11-20 09:17:47*